layui.define(["laytpl","laypage","layer","form"],function(e){"use strict";var m=layui.$,v=layui.laytpl,c=layui.laypage,h=layui.layer,t=layui.form,u=layui.hint(),y=layui.device(),g={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(e){var t=this;return t.config=m.extend({},t.config,e),t},on:function(e,t){return layui.onevent.call(this,f,e,t)}},a=function(){var t=this,e=t.config,i=e.id;return i&&(a.config[i]=e),{reload:function(e){t.reload.call(t,e)},config:e}},f="table",s="layui-hide",x="layui-none",o="layui-table-view",d=".layui-table-header",p=".layui-table-body",b=".layui-table-sort",k="layui-table-edit",i="layui-table-hover",l=function(e){return['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',(e=e||{}).fixed&&"right"!==e.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===e.fixed?'{{# if(item2.fixed === "right"){ }}':"",'<th data-field="{{ item2.field||i2 }}" {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} {{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}} {{# if(item2.unresize){ }}data-unresize="true"{{# } }}>','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colspan > 1){ }}","group","{{# } else { }}","{{d.index}}-{{item2.field || i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(!(item2.colspan > 1) && item2.sort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc"></i><i class="layui-edge layui-table-sort-desc"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",e.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},n=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),r=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool"></div>',"{{# } }}",'<div class="layui-table-box">',"{{# var left, right; }}",'<div class="layui-table-header">',l(),"</div>",'<div class="layui-table-body layui-table-main">',n,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',l({fixed:!0}),"</div>",'<div class="layui-table-body">',n,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',l({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',n,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.page){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{item2.field||i2}}{ ","{{# if(item2.width){ }}","width: {{item2.width}}px;","{{# } }}"," }","{{# });","}); }}","</style>","</div>"].join(""),C=m(window),w=m(document),N=function(e){var t=this;t.index=++g.index,t.config=m.extend({},t.config,g.config,e),t.render()};N.prototype.config={limit:10,loading:!0,cellMinWidth:60,text:{none:"无数据"}},N.prototype.render=function(){var e=this,t=e.config;if(t.elem=m(t.elem),t.where=t.where||{},t.id=t.id||t.elem.attr("id"),t.request=m.extend({pageName:"page",limitName:"limit"},t.request),t.response=m.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},t.response),"object"==typeof t.page&&(t.limit=t.page.limit||t.limit,t.limits=t.page.limits||t.limits,e.page=t.page.curr=t.page.curr||1,delete t.page.elem,delete t.page.jump),!t.elem[0])return e;e.setArea();var i=t.elem,a=i.next("."+o),l=e.elem=m(v(r).render({VIEW_CLASS:o,data:t,index:e.index}));if(t.index=e.index,a[0]&&a.remove(),i.after(l),e.layHeader=l.find(d),e.layMain=l.find(".layui-table-main"),e.layBody=l.find(p),e.layFixed=l.find(".layui-table-fixed"),e.layFixLeft=l.find(".layui-table-fixed-l"),e.layFixRight=l.find(".layui-table-fixed-r"),e.layTool=l.find(".layui-table-tool"),e.layPage=l.find(".layui-table-page"),e.layTool.html(v(m(t.toolbar).html()||"").render(t)),t.height&&e.fullSize(),1<t.cols.length){var n=e.layFixed.find(d).find("th");n.height(e.layHeader.height()-1-parseFloat(n.css("padding-top"))-parseFloat(n.css("padding-bottom")))}e.pullData(e.page),e.events()},N.prototype.initOpts=function(e){var t=(this.config,{checkbox:48,space:15,numbers:40});e.checkbox&&(e.type="checkbox"),e.space&&(e.type="space"),e.type||(e.type="normal"),"normal"!==e.type&&(e.unresize=!0,e.width=e.width||t[e.type])},N.prototype.setArea=function(){var a,l=this,n=l.config,e=0,o=0,d=0,r=0,c=n.width||(a=function(e){var t,i;t=(e=e||n.elem.parent()).width();try{i="none"===e.css("display")}catch(e){}return!e[0]||t&&!i?t:a(e.parent())})();l.eachCols(function(){e++}),c-="line"===n.skin||"nob"===n.skin?2:e+1,layui.each(n.cols,function(e,a){layui.each(a,function(e,t){var i;return t?(l.initOpts(t),i=t.width||0,void(1<t.colspan||(/\d+%$/.test(i)?t.width=i=Math.floor(parseFloat(i)/100*c):i||(t.width=i=0,o++),r+=i))):void a.splice(e,1)})}),l.autoColNums=o,r<c&&o&&(d=(c-r)/o),layui.each(n.cols,function(e,t){layui.each(t,function(e,t){var i=t.minWidth||n.cellMinWidth;1<t.colspan||0===t.width&&(t.width=Math.floor(i<=d?d:i))})}),n.height&&/^full-\d+$/.test(n.height)&&(l.fullHeightGap=n.height.split("-")[1],n.height=C.height()-l.fullHeightGap)},N.prototype.reload=function(e){var t=this;t.config.data&&t.config.data.constructor===Array&&delete t.config.data,t.config=m.extend({},t.config,e),t.render()},N.prototype.page=1,N.prototype.pullData=function(t,i){var a=this,l=a.config,e=l.request,n=l.response,o=function(){"object"==typeof l.initSort&&a.sort(l.initSort.field,l.initSort.type)};if(a.startTime=(new Date).getTime(),l.url){var d={};d[e.pageName]=t,d[e.limitName]=l.limit;var r=m.extend(d,l.where);l.contentType&&0==l.contentType.indexOf("application/json")&&(r=JSON.stringify(r)),m.ajax({type:l.method||"get",url:l.url,contentType:l.contentType,data:r,dataType:"json",headers:l.headers||{},success:function(e){e[n.statusName]!=n.statusCode?(a.renderForm(),a.layMain.html('<div class="'+x+'">'+(e[n.msgName]||"返回的数据状态异常")+"</div>")):(a.renderData(e,t,e[n.countName]),o(),l.time=(new Date).getTime()-a.startTime+" ms"),i&&h.close(i),"function"==typeof l.done&&l.done(e,t,e[n.countName])},error:function(e,t){a.layMain.html('<div class="'+x+'">数据接口请求异常</div>'),a.renderForm(),i&&h.close(i)}})}else if(l.data&&l.data.constructor===Array){var c={},s=t*l.limit-l.limit;c[n.dataName]=l.data.concat().splice(s,l.limit),c[n.countName]=l.data.length,a.renderData(c,t,l.data.length),o(),"function"==typeof l.done&&l.done(c,t,c[n.countName])}},N.prototype.eachCols=function(i){var l=m.extend(!0,[],this.config.cols),n=[],o=0;layui.each(l,function(t,e){layui.each(e,function(e,i){if(1<i.colspan){var a=0;o++,i.CHILD_COLS=[],layui.each(l[t+1],function(e,t){t.PARENT_COL||a==i.colspan||(t.PARENT_COL=o,i.CHILD_COLS.push(t),a+=1<t.colspan?t.colspan:1)})}i.PARENT_COL||n.push(i)})});var a=function(e){layui.each(e||n,function(e,t){return t.CHILD_COLS?a(t.CHILD_COLS):void i(e,t)})};a()},N.prototype.renderData=function(e,t,i,a){var f=this,p=f.config,l=e[p.response.dataName]||[],n=[],o=[],d=[],r=function(){return!a&&f.sortKey?f.sort(f.sortKey.field,f.sortKey.sort,!0):(layui.each(l,function(e,c){var s=[],h=[],u=[],y=e+p.limit*(t-1)+1;0!==c.length&&(a||(c[g.config.indexName]=e),f.eachCols(function(e,t){var i,a,l,n,o=t.field||e,d=c[o];if(f.getColElem(f.layHeader,o),null!=d||(d=""),!(1<t.colspan)){var r=['<td data-field="'+o+'" '+(n=[],t.edit&&n.push('data-edit="'+t.edit+'"'),t.align&&n.push('align="'+t.align+'"'),t.templet&&n.push('data-content="'+d+'"'),t.toolbar&&n.push('data-off="true"'),t.event&&n.push('lay-event="'+t.event+'"'),t.style&&n.push('style="'+t.style+'"'),t.minWidth&&n.push('data-minwidth="'+t.minWidth+'"'),n.join(" "))+">",'<div class="layui-table-cell laytable-cell-'+(l=p.index+"-"+o,"normal"===t.type?l:l+" laytable-cell-"+t.type)+'">'+(a=m.extend(!0,{LAY_INDEX:y},c),"checkbox"===t.type?'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+(i=g.config.checkName,t[i]?(c[i]=t[i],t[i]?"checked":""):a[i]?"checked":"")+">":"numbers"===t.type?y:t.toolbar?v(m(t.toolbar).html()||"").render(a):t.templet?"function"==typeof t.templet?t.templet(a):v(m(t.templet).html()||String(d)).render(a):d),"</div></td>"].join("");s.push(r),t.fixed&&"right"!==t.fixed&&h.push(r),"right"===t.fixed&&u.push(r)}}),n.push('<tr data-index="'+e+'">'+s.join("")+"</tr>"),o.push('<tr data-index="'+e+'">'+h.join("")+"</tr>"),d.push('<tr data-index="'+e+'">'+u.join("")+"</tr>"))}),f.layBody.scrollTop(0),f.layMain.find("."+x).remove(),f.layMain.find("tbody").html(n.join("")),f.layFixLeft.find("tbody").html(o.join("")),f.layFixRight.find("tbody").html(d.join("")),f.renderForm(),f.syncCheckAll(),f.haveInit?f.scrollPatch():setTimeout(function(){f.scrollPatch()},50),f.haveInit=!0,void h.close(f.tipsIndex))};return f.key=p.id||p.index,g.cache[f.key]=l,f.layPage[0===l.length&&1==t?"addClass":"removeClass"](s),a?r():0===l.length?(f.renderForm(),f.layFixed.remove(),f.layMain.find("tbody").html(""),f.layMain.find("."+x).remove(),f.layMain.append('<div class="'+x+'">'+p.text.none+"</div>")):(r(),void(p.page&&(p.page=m.extend({elem:"layui-table-page"+p.index,count:i,limit:p.limit,limits:p.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,t){t||(f.page=e.curr,p.limit=e.limit,f.pullData(e.curr,f.loading()))}},p.page),p.page.count=i,c.render(p.page))))},N.prototype.getColElem=function(e,t){var i=this.config;return e.eq(0).find(".laytable-cell-"+i.index+"-"+t+":eq(0)")},N.prototype.renderForm=function(e){t.render(e,"LAY-table-"+this.index)},N.prototype.sort=function(l,e,t,i){var a,n=this,o={},d=n.config,r=d.elem.attr("lay-filter"),c=g.cache[n.key];"string"==typeof l&&n.layHeader.find("th").each(function(e,t){var i=m(this),a=i.data("field");if(a===l)return l=i,s=a,!1});try{var s=s||l.data("field");if(n.sortKey&&!t&&s===n.sortKey.field&&e===n.sortKey.sort)return;var h=n.layHeader.find("th .laytable-cell-"+d.index+"-"+s).find(b);n.layHeader.find("th").find(b).removeAttr("lay-sort"),h.attr("lay-sort",e||null),n.layFixed.find("th")}catch(e){return u.error("Table modules: Did not match to field")}n.sortKey={field:s,sort:e},"asc"===e?a=layui.sort(c,s):"desc"===e?a=layui.sort(c,s,!0):(a=layui.sort(c,g.config.indexName),delete n.sortKey),o[d.response.dataName]=a,n.renderData(o,n.page,n.count,!0),i&&layui.event.call(l,f,"sort("+r+")",{field:s,type:e})},N.prototype.loading=function(){var e=this,t=e.config;if(t.loading&&t.url)return h.msg("数据请求中",{icon:16,offset:[e.elem.offset().top+e.elem.height()/2-35-C.scrollTop()+"px",e.elem.offset().left+e.elem.width()/2-90-C.scrollLeft()+"px"],time:-1,anim:-1,fixed:!1})},N.prototype.setCheckData=function(e,t){var i=this.config,a=g.cache[this.key];a[e]&&a[e].constructor!==Array&&(a[e][i.checkName]=t)},N.prototype.syncCheckAll=function(){var e=this,a=e.config,t=e.layHeader.find('input[name="layTableCheckbox"]'),i=function(i){return e.eachCols(function(e,t){"checkbox"===t.type&&(t[a.checkName]=i)}),i};t[0]&&(g.checkStatus(e.key).isAll?(t[0].checked||(t.prop("checked",!0),e.renderForm("checkbox")),i(!0)):(t[0].checked&&(t.prop("checked",!1),e.renderForm("checkbox")),i(!1)))},N.prototype.getCssRule=function(i,a){var l=this,e=l.elem.find("style")[0],t=e.sheet||e.styleSheet||{},n=t.cssRules||t.rules;layui.each(n,function(e,t){if(t.selectorText===".laytable-cell-"+l.index+"-"+i)return a(t),!0})},N.prototype.fullSize=function(){var e,t=this,i=t.config,a=i.height;t.fullHeightGap&&((a=C.height()-t.fullHeightGap)<135&&(a=135),t.elem.css("height",a)),e=parseFloat(a)-parseFloat(t.layHeader.height())-1,i.toolbar&&(e-=t.layTool.outerHeight()),i.page&&(e=e-t.layPage.outerHeight()-1),t.layMain.css("height",e)},N.prototype.getScrollWidth=function(e){var t=0;return e?t=e.offsetWidth-e.clientWidth:((e=document.createElement("div")).style.width="100px",e.style.height="100px",e.style.overflowY="scroll",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),t},N.prototype.scrollPatch=function(){var i=this,e=i.layMain.children("table"),t=i.layMain.width()-i.layMain.prop("clientWidth"),a=i.layMain.height()-i.layMain.prop("clientHeight"),l=i.getScrollWidth(i.layMain[0]),n=e.outerWidth()-i.layMain.width();if(i.autoColNums&&n<5&&!i.scrollPatchWStatus){var o=i.layHeader.eq(0).find("thead th:last-child"),d=o.data("field");i.getCssRule(d,function(e){var t=e.style.width||o.outerWidth();e.style.width=parseFloat(t)-l-n+"px",0<i.layMain.height()-i.layMain.prop("clientHeight")&&(e.style.width=parseFloat(e.style.width)-1+"px"),i.scrollPatchWStatus=!0})}if(t&&a){if(!i.elem.find(".layui-table-patch")[0]){var r=m('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>');r.find("div").css({width:t}),i.layHeader.eq(0).find("thead tr").append(r)}}else i.layHeader.eq(0).find(".layui-table-patch").remove();var c=i.layMain.height()-a;i.layFixed.find(p).css("height",e.height()>c?c:"auto"),i.layFixRight[0<n?"removeClass":"addClass"](s),i.layFixRight.css("right",t-1)},N.prototype.events=function(){var l,o=this,n=o.config,d=m("body"),r={},e=o.layHeader.find("th"),c=".layui-table-cell",s=n.elem.attr("lay-filter");e.on("mousemove",function(e){var t=m(this),i=t.offset().left,a=e.clientX-i;1<t.attr("colspan")||t.data("unresize")||r.resizeStart||(r.allowResize=t.width()-a<=10,d.css("cursor",r.allowResize?"col-resize":""))}).on("mouseleave",function(){m(this),r.resizeStart||d.css("cursor","")}).on("mousedown",function(e){var i=m(this);if(r.allowResize){var t=i.data("field");e.preventDefault(),r.resizeStart=!0,r.offset=[e.clientX,e.clientY],o.getCssRule(t,function(e){var t=e.style.width||i.outerWidth();r.rule=e,r.ruleWidth=parseFloat(t),r.minWidth=i.data("minwidth")||n.cellMinWidth})}}),w.on("mousemove",function(e){if(r.resizeStart){if(e.preventDefault(),r.rule){var t=r.ruleWidth+e.clientX-r.offset[0];t<r.minWidth&&(t=r.minWidth),r.rule.style.width=t+"px",h.close(o.tipsIndex)}l=1}}).on("mouseup",function(e){r.resizeStart&&(r={},d.css("cursor",""),o.scrollPatch()),2===l&&(l=null)}),e.on("click",function(){var e,t=m(this),i=t.find(b),a=i.attr("lay-sort");return i[0]&&1!==l?(e="asc"===a?"desc":"desc"===a?null:"asc",void o.sort(t,e,null,!0)):l=2}).find(b+" .layui-edge ").on("click",function(e){var t=m(this),i=t.index(),a=t.parents("th").eq(0).data("field");layui.stope(e),0===i?o.sort(a,"asc",null,!0):o.sort(a,"desc",null,!0)}),o.elem.on("click",'input[name="layTableCheckbox"]+',function(){var e=m(this).prev(),t=o.layBody.find('input[name="layTableCheckbox"]'),i=e.parents("tr").eq(0).data("index"),a=e[0].checked,l="layTableAllChoose"===e.attr("lay-filter");l?(t.each(function(e,t){t.checked=a,o.setCheckData(e,a)}),o.syncCheckAll(),o.renderForm("checkbox")):(o.setCheckData(i,a),o.syncCheckAll()),layui.event.call(this,f,"checkbox("+s+")",{checked:a,data:g.cache[o.key]&&g.cache[o.key][i]||{},type:l?"all":"one"})}),o.layBody.on("mouseenter","tr",function(){var e=m(this).index();o.layBody.find("tr:eq("+e+")").addClass(i)}).on("mouseleave","tr",function(){var e=m(this).index();o.layBody.find("tr:eq("+e+")").removeClass(i)}),o.layBody.on("change","."+k,function(){var e=m(this),t=this.value,i=e.parent().data("field"),a=e.parents("tr").eq(0).data("index"),l=g.cache[o.key][a];l[i]=t,layui.event.call(this,f,"edit("+s+")",{value:t,data:l,field:i})}).on("blur","."+k,function(){var i,e=m(this),a=e.parent().data("field"),t=e.parents("tr").eq(0).data("index"),l=g.cache[o.key][t];o.eachCols(function(e,t){t.field==a&&t.templet&&(i=t.templet)}),e.siblings(c).html(i?v(m(i).html()||this.value).render(l):this.value),e.parent().data("content",this.value),e.remove()}),o.layBody.on("click","td",function(){var e=m(this),t=(e.data("field"),e.data("edit")),i=e.children(c);if(h.close(o.tipsIndex),!e.data("off"))if(t)if("select"===t);else{var a=m('<input class="layui-input '+k+'">');a[0].value=e.data("content")||i.text(),e.find("."+k)[0]||e.append(a),a.focus()}else i.find(".layui-form-switch,.layui-form-checkbox")[0]||Math.round(i.prop("scrollWidth"))>Math.round(i.outerWidth())&&(o.tipsIndex=h.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(i.height()+16)+"px;"+("sm"===n.size?"padding: 4px 15px; font-size: 12px;":"lg"===n.size?"padding: 14px 15px;":"")+'">',i.html(),"</div>",'<i class="layui-icon layui-table-tips-c">&#x1006;</i>'].join(""),i[0],{tips:[3,""],time:-1,anim:-1,maxWidth:y.ios||y.android?300:600,isOutAnim:!1,skin:"layui-table-tips",success:function(e,t){e.find(".layui-table-tips-c").on("click",function(){h.close(t)})}}))}),o.layBody.on("click","*[lay-event]",function(){var e=m(this),t=e.parents("tr").eq(0).data("index"),l=o.layBody.find('tr[data-index="'+t+'"]'),i="layui-table-click",n=g.cache[o.key][t];layui.event.call(this,f,"tool("+s+")",{data:g.clearCacheKey(n),event:e.attr("lay-event"),tr:l,del:function(){g.cache[o.key][t]=[],l.remove(),o.scrollPatch()},update:function(e){e=e||{},layui.each(e,function(i,e){if(i in n){var a,t=l.children('td[data-field="'+i+'"]');n[i]=e,o.eachCols(function(e,t){t.field==i&&t.templet&&(a=t.templet)}),t.children(c).html(a?v(m(a).html()||e).render(n):e),t.data("content",e)}})}}),l.addClass(i).siblings("tr").removeClass(i)}),o.layMain.on("scroll",function(){var e=m(this),t=e.scrollLeft(),i=e.scrollTop();o.layHeader.scrollLeft(t),o.layFixed.find(p).scrollTop(i),h.close(o.tipsIndex)}),C.on("resize",function(){o.fullSize(),o.scrollPatch()})},g.init=function(i,a){a=a||{};var e=m(i?'table[lay-filter="'+i+'"]':".layui-table[lay-data]"),d="Table element property lay-data configuration item has a syntax error: ";return e.each(function(){var e=m(this),t=e.attr("lay-data");try{t=new Function("return "+t)()}catch(e){u.error(d+t)}var n=[],o=m.extend({elem:this,cols:[],data:[],skin:e.attr("lay-skin"),size:e.attr("lay-size"),even:"string"==typeof e.attr("lay-even")},g.config,a,t);i&&e.hide(),e.find("thead>tr").each(function(l){o.cols[l]=[],m(this).children().each(function(e){var t=m(this),i=t.attr("lay-data");try{i=new Function("return "+i)()}catch(e){return u.error(d+i)}var a=m.extend({title:t.text(),colspan:t.attr("colspan")||0,rowspan:t.attr("rowspan")||0},i);a.colspan<2&&n.push(a),o.cols[l].push(a)})}),e.find("tbody>tr").each(function(e){var a=m(this),l={};a.children("td").each(function(e,t){var i=m(this),a=i.data("field");if(a)return l[a]=i.html()}),layui.each(n,function(e,t){var i=a.children("td").eq(e);l[t.field]=i.html()}),o.data[e]=l}),g.render(o)}),this},g.checkStatus=function(e){var i=0,a=0,l=[],t=g.cache[e]||[];return layui.each(t,function(e,t){return t.constructor===Array?void a++:void(t[g.config.checkName]&&(i++,l.push(g.clearCacheKey(t))))}),{data:l,isAll:!!t.length&&i===t.length-a}},a.config={},g.reload=function(e,t){var i=a.config[e];return t=t||{},i?(t.data&&t.data.constructor===Array&&delete i.data,g.render(m.extend(!0,{},i,t))):u.error("The ID option was not found in the table instance")},g.render=function(e){var t=new N(e);return a.call(t)},g.clearCacheKey=function(e){return delete(e=m.extend({},e))[g.config.checkName],delete e[g.config.indexName],e},g.init(),e(f,g)});
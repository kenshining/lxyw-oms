layui.use(["table","layer","element","jquery"],function(){var i=layui.table,o=layui.layer,s=(layui.element,layui.jquery);i.render({elem:"#table_content",id:"user_table",where:{t:(new Date).getTime(),username:s("#username").val(),name:s("#name").val(),cellphoneNo:s("#cellphoneNo").val()},url:"/user/user_findUserByPage",cols:[[{type:"checkbox"},{field:"username",align:"center",title:"用户名"},{field:"name",align:"center",title:"姓名"},{field:"sex",align:"center",title:"性别",templet:function(e){return"F"==e.sex?"女":"男"}},{field:"cellphoneNo",align:"center",title:"手机号"},{field:"birthdayStr",align:"center",title:"生日"},{fixed:"right",align:"center",title:"操作",toolbar:"#table_control_bar"}]],page:!0,loading:!0,limits:[10,20,50,90]}),s("#search").on("click",function(){i.reload("user_table",{page:{curr:1},where:{t:(new Date).getTime(),username:s("#username").val(),name:s("#name").val(),cellphoneNo:s("#cellphoneNo").val()},loading:!0})}),s("#add").on("click",function(){o.open({content:"/user/user_edit",type:2,anim:2,title:"新增用户信息",btn:["新增","取消"],skin:"layui-layer-rim",area:["500px","80%"],success:function(e,n){},yes:function(a,e){var n=o.getChildFrame("form",a),l=o.load(2);s.post("/user/saveUser",{name:n.contents().find("input[name='name']").val(),username:n.contents().find("input[name='username']").val(),sex:n.contents().find("select[name='sex']").val(),email:n.contents().find("input[name='email']").val(),idcardNo:n.contents().find("input[name='idcardNo']").val(),birthday:n.contents().find("input[name='birthday']").val(),cellphoneNo:n.contents().find("input[name='cellphoneNo']").val(),wechat:n.contents().find("input[name='wechat']").val(),postCode:n.contents().find("input[name='postCode']").val(),address:n.contents().find("textarea[name='address']").val()},function(e,n,t){o.close(l),o.close(a),o.msg("用户数据保存成功"),i.reload("user_table")},"json")}})}),i.on("tool(user_table_filter)",function(e){var t=e.data,n=e.event;e.tr;if("del"===n)o.confirm("确认要删除用户吗？",{icon:4,title:"删除",btn:["删除","取消"]},function(e){o.close(e);var n=o.load(2);o.close(n),alert(t.id),i.reload("user_table")});else if("edit"===n)o.open({content:"/user/user_edit?id="+t.id,type:2,anim:2,title:"编辑客户信息",btn:["保存","取消"],skin:"layui-layer-rim",area:["500px","80%"],success:function(e,n){},yes:function(a,e){var n=o.getChildFrame("form",a),l=o.load(2);s.post("/user/saveUser",{name:n.contents().find("input[name='name']").val(),id:n.contents().find("input[name='id']").val(),username:n.contents().find("input[name='username']").val(),sex:n.contents().find("select[name='sex']").val(),email:n.contents().find("input[name='email']").val(),idcardNo:n.contents().find("input[name='idcardNo']").val(),birthday:n.contents().find("input[name='birthday']").val(),cellphoneNo:n.contents().find("input[name='cellphoneNo']").val(),wechat:n.contents().find("input[name='wechat']").val(),postCode:n.contents().find("input[name='postCode']").val(),address:n.contents().find("textarea[name='address']").val()},function(e,n,t){o.close(l),o.close(a),o.msg("用户数据保存成功"),i.reload("user_table")},"json")}})})});
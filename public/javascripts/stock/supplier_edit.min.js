layui.use(["form","layer","jquery","table","element"],function(){var i=layui.jquery,t=layui.form,l=layui.table,n=(layui.element,layui.layer),o=[];if(l.render({elem:"#contact_table_container",id:"contact_table",page:!1,data:o,cols:[[{field:"name",minWidth:"120",align:"center",title:"姓名"},{field:"position",minWidth:"120",align:"center",title:"职位"},{field:"cellphone",minWidth:"120",align:"center",title:"移动电话"},{field:"email",minWidth:"240",align:"center",title:"Email"},{field:"remark",minWidth:"240",align:"center",title:"备注"},{align:"center",minWidth:"120",title:"操作",toolbar:"#table_control_bar"}]],loading:!0}),0<i("#individualLink").length){for(var e=i.parseJSON(i("#individualLink").val()),a=0;a<e.length;a++){var r={id:e[a].id,name:e[a].name,position:e[a].position,cellphone:e[a].cellphone,remark:e[a].remark,email:e[a].email};o.push(r)}JSON.stringify(JSON.stringify(o)),i("#contact_table_container").attr("data",JSON.stringify(o)),l.reload("contact_table",{data:o})}t.render(),l.reload("contact_table"),i("#addNewConnectorBtn").on("click",function(){n.open({content:i("#addContect").html(),type:1,anim:2,title:"编辑联系人",btn:["保存","取消"],skin:"layui-layer-rim",area:["500px","90%"],success:function(){i(".layui-layer-btn0",parent.document).hide()},yes:function(t,e){var a={id:(new Date).getTime(),name:i("#tmp_add_name").val(),position:i("#tmp_add_position").val(),cellphone:i("#tmp_add_cellphoneNo").val(),email:i("#tmp_add_email").val(),remark:i("#tmp_add_remark").val()};""!=a.name&&""!=a.position&&""!=a.cellphone&&""!=a.email?(o.push(a),i("#contact_table_container").attr("data",JSON.stringify(o)),l.reload("contact_table",{data:o}),n.close(t)):n.msg("字段[姓名、职位、电话、email]均不能为空。")},end:function(){i(".layui-layer-btn0",parent.document).show()}})}),l.on("tool(contact_table_container)",function(t){t.data;var e=t.event;t.tr;if("deletContect"===e){for(var a=[],n=0;n<o.length;n++)o[n].id!=t.data.id&&a.push(o[n]);l.reload("contact_table",{data:a}),o=a,i("#contact_table_container").attr("data",JSON.stringify(o))}})});
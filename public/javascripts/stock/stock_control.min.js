layui.use(["layer","jquery","form","table"],function(){var y=layui.jquery,e=(layui.form,layui.table),i=layui.layer;y("#search").on("click",function(){e.reload("stock_table",{page:{curr:1},where:{t:(new Date).getTime(),productName:y("#productName_search").val(),cellphoneNo:y("#productId_search").val()},loading:!0})}),y("#add").on("click",function(){var e=i.open({content:"/stock/stock_edit",type:2,anim:4,title:"编辑库存",btn:["保存","取消"],success:function(e,t){},yes:function(e,t){var n=i.getChildFrame("#stock_form",e),l=a(n);""==l?i.msg("正在提交"):i.msg(l)}});i.full(e)}),e.render({elem:"#table_content",id:"stock_table",where:{t:(new Date).getTime()},cols:[[{type:"checkbox"},{field:"productName",align:"center",title:"品名"},{field:"qNo",align:"center",title:"条形码"},{field:"batch",align:"center",title:"批次"},{field:"location",align:"center",title:"产地"},{field:"location",align:"center",title:"规格"},{field:"location",align:"center",title:"供应商"},{field:"state",align:"center",title:"库存状态",templet:function(e){return"F"==e.sex?"女":"男"}},{fixed:"right",align:"center",title:"操作",toolbar:"#table_control_bar"}]],page:!0,loading:!0,limits:[10,20,50,90]});var a=function(e){var t=new CommonValidationUtils,n=new CommonValidationEmu,l=e.contents().find("input[name='productName']").val(),i=e.contents().find("input[name='productBatch']").val(),a=e.contents().find("input[name='qno']").val(),o=e.contents().find("input[name='location']").val(),c=e.contents().find("#box_num").val(),s=e.contents().find("select[name='positon']").val(),r=e.contents().find("#plus_num").val(),u=e.contents().find("select[name='plusPosition']").val(),f=e.contents().find("#format_num").val(),d=e.contents().find("#guaranteeTime").val(),m=e.contents().find("#singleNetWeight").val(),g=e.contents().find("#singleCapacity").val(),p=(e.contents().find("#state").val(),e.contents().find("#storage").val(),e.contents().find("#wastage").val()),v=(e.contents().find("#supplierId").val(),e.contents().find("#storage_fee").val());if(t.isNull(l)||t.isNull(i)||t.isNull(a)||t.isNull(o)||t.isNull(c)||t.isNull(s)||t.isNull(r)||t.isNull(u)||t.isNull(f)||t.isNull(d)||t.isNull(m)||t.isNull(g)||t.isNull(p)||t.isNull(v))return n.errorMsg.all_not_null;for(var N=y.parseJSON(e.contents().find("#fee_container").attr("data")),_=0;_<N.length;_++){if(t.isNull(N[_].fee))return"未设置["+N[_].type+"],若无需保存此项，请删除。";if(!t.isNumber(N[_].fee)&&!t.isDecimal(N[_].fee))return"["+N[_].type+"],要求输入数字。"}return""}});
layui.define(["element","common"],function(i){"use strict";var c=layui.jquery,t=(void 0===parent.layer?layui.layer:parent.layer,layui.element()),l=layui.common,o="tb_navbar",e=function(){this.config={elem:void 0,data:void 0,url:void 0,type:"GET",cached:!1,spreadOne:!1},this.v="1.0.0"};function d(i){for(var e='<ul class="layui-nav layui-nav-tree beg-navbar">',a=0;a<i.length;a++){if(i[a].spread?e+='<li class="layui-nav-item layui-nav-itemed">':e+='<li class="layui-nav-item">',void 0!==i[a].children&&null!==i[a].children&&0<i[a].children.length){e+='<a href="javascript:;">',void 0!==i[a].icon&&""!==i[a].icon&&(-1!==i[a].icon.indexOf("fa-")?e+='<i class="fa '+i[a].icon+'" aria-hidden="true" data-icon="'+i[a].icon+'"></i>':e+='<i class="layui-icon" data-icon="'+i[a].icon+'">'+i[a].icon+"</i>"),e+="<cite>"+i[a].title+"</cite>",e+="</a>",e+='<dl class="layui-nav-child">';for(var n=0;n<i[a].children.length;n++)e+='<dd title="'+i[a].children[n].title+'">',e+='<a href="javascript:;" data-url="'+i[a].children[n].href+'">',void 0!==i[a].children[n].icon&&""!==i[a].children[n].icon&&(-1!==i[a].children[n].icon.indexOf("fa-")?e+='<i class="fa '+i[a].children[n].icon+'" data-icon="'+i[a].children[n].icon+'" aria-hidden="true"></i>':e+='<i class="layui-icon" data-icon="'+i[a].children[n].icon+'">'+i[a].children[n].icon+"</i>"),e+="<cite>"+i[a].children[n].title+"</cite>",e+="</a>",e+="</dd>";e+="</dl>"}else{e+='<a href="javascript:;" '+(void 0!==i[a].href&&""!==i[a].href?'data-url="'+i[a].href+'"':"")+">",void 0!==i[a].icon&&""!==i[a].icon&&(-1!==i[a].icon.indexOf("fa-")?e+='<i class="fa '+i[a].icon+'" aria-hidden="true" data-icon="'+i[a].icon+'"></i>':e+='<i class="layui-icon" data-icon="'+i[a].icon+'">'+i[a].icon+"</i>"),e+="<cite>"+i[a].title+"</cite>",e+="</a>"}e+="</li>"}return e+="</ul>"}e.prototype.render=function(){var r,a=this,i=a.config;if("string"!=typeof i.elem&&"object"!=typeof i.elem&&l.throwError("Navbar error: elem参数未定义或设置出错，具体设置格式请参考文档API."),"string"==typeof i.elem&&(r=c(""+i.elem)),"object"==typeof i.elem&&(r=i.elem),0===r.length&&l.throwError("Navbar error:找不到elem参数配置的容器，请检查."),void 0===i.data&&void 0===i.url&&l.throwError("Navbar error:请为Navbar配置数据源."),void 0!==i.data&&"object"==typeof i.data){var e=d(i.data);r.html(e),t.init(),a.config.elem=r}else if(i.cached){var n=layui.data(o);if(void 0===n.navbar)c.ajax({type:i.type,url:i.url,async:!1,dataType:"json",success:function(i,e,a){layui.data(o,{key:"navbar",value:i});var n=d(i);r.html(n),t.init()},error:function(i,e,a){l.msgError("Navbar error:"+a)},complete:function(i,e){a.config.elem=r}});else{e=d(n.navbar);r.html(e),t.init(),a.config.elem=r}}else layui.data(o,null),c.ajax({type:i.type,url:i.url,async:!1,dataType:"json",success:function(i,e,a){var n=d(i);r.html(n),t.init()},error:function(i,e,a){l.msgError("Navbar error:"+a)},complete:function(i,e){a.config.elem=r}});i.spreadOne&&r.children("ul").find("li.layui-nav-item").each(function(){c(this).on("click",function(){c(this).siblings().removeClass("layui-nav-itemed")})});return a},e.prototype.set=function(i){var e=this;return e.config.data=void 0,c.extend(!0,e.config,i),e},e.prototype.on=function(i,t){var e=this.config.elem;"string"!=typeof i&&l.throwError("Navbar error:事件名配置出错，请参考API文档.");var a=i.indexOf("("),n=i.substr(0,a);i.substring(a+1,i.indexOf(")"));"click"===n&&void 0!==e.attr("lay-filter")&&e.children("ul").find("li").each(function(){var r=c(this);if(0<r.find("dl").length)r.find("dd").each(function(){c(this).on("click",function(){var i=c(this).children("a"),e=i.data("url"),a=i.children("i:first").data("icon"),n=i.children("cite").text();t({elem:i,field:{href:e,icon:a,title:n}})})});else r.on("click",function(){var i=r.children("a"),e=i.data("url"),a=i.children("i:first").data("icon"),n=i.children("cite").text();t({elem:i,field:{href:e,icon:a,title:n}})})})},e.prototype.cleanCached=function(){layui.data(o,null)};var a=new e;i("navbar",function(i){return a.set(i)})});
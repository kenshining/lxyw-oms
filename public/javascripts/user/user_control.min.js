layui.use(["table","layer","element","jquery"],function(){var a=layui.table,l=layui.layer,o=(layui.element,layui.jquery);a.render({elem:"#table_content",id:"user_table",where:{t:(new Date).getTime(),username:o("#username").val(),name:o("#name").val(),cellphoneNo:o("#cellphoneNo").val()},url:"/user/user_findUserByPage",cols:[[{type:"checkbox"},{field:"username",align:"center",title:"用户名"},{field:"name",align:"center",title:"姓名"},{field:"sex",align:"center",title:"性别",templet:function(e){return"F"==e.sex?"女":"男"}},{field:"cellphoneNo",align:"center",title:"手机号"},{field:"birthdayStr",align:"center",title:"生日"},{fixed:"right",align:"center",title:"操作",toolbar:"#table_control_bar"}]],page:!0,loading:!0,limits:[10,20,50,90]}),o("#search").on("click",function(){a.reload("user_table",{page:{curr:1},where:{t:(new Date).getTime(),username:o("#username").val(),name:o("#name").val(),cellphoneNo:o("#cellphoneNo").val()},loading:!0})}),o("#add").on("click",function(){l.open({content:"/user/user_edit",type:2,anim:2,title:"新增用户信息",btn:["新增","取消"],skin:"layui-layer-rim",area:["500px","400px"],success:function(e,n){},yes:function(a,e){var n=l.getChildFrame("form",a),i=l.load(2);o.post("/user/saveUser",{username:n.contents().find("input[name='username']").val(),sex:n.contents().find("select[name='sex']").val(),email:n.contents().find("input[name='email']").val(),idcardNo:n.contents().find("input[name='idcardNo']").val(),birthday:n.contents().find("input[name='birthday']").val(),cellphoneNo:n.contents().find("input[name='cellphoneNo']").val(),wechat:n.contents().find("input[name='wechat']").val(),postCode:n.contents().find("input[name='postCode']").val(),address:n.contents().find("textarea[name='address']").val()},function(e,n,t){l.close(i),l.close(a),l.msg("用户数据保存成功")},"json")}})}),a.on("tool(user_table_filter)",function(e){var t=e.data,n=e.event;e.tr;if("del"===n)l.confirm("确认要删除用户吗？",{icon:4,title:"删除",btn:["删除","取消"]},function(e){l.close(e);var n=l.load(2);l.close(n),alert(t.id),a.reload("user_table")});else if("edit"===n)l.open({content:"/user/user_edit?id="+t.id,type:2,anim:2,title:"编辑客户信息",btn:["保存","取消"],skin:"layui-layer-rim",area:["500px","400px"],success:function(e,n){},yes:function(a,e){var n=l.getChildFrame("form",a),i=l.load(2);o.post("/user/saveUser",{id:n.contents().find("input[name='id']").val(),username:n.contents().find("input[name='username']").val(),sex:n.contents().find("select[name='sex']").val(),email:n.contents().find("input[name='email']").val(),idcardNo:n.contents().find("input[name='idcardNo']").val(),birthday:n.contents().find("input[name='birthday']").val(),cellphoneNo:n.contents().find("input[name='cellphoneNo']").val(),wechat:n.contents().find("input[name='wechat']").val(),postCode:n.contents().find("input[name='postCode']").val(),address:n.contents().find("textarea[name='address']").val()},function(e,n,t){l.close(i),l.close(a),l.msg("用户数据保存成功")},"json")}})})});
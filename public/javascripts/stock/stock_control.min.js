layui.use(["layer","jquery","form","table","laydate"],function(){var b=layui.jquery,e=(layui.form,layui.table),t=layui.laydate,i=layui.layer;b("#search").on("click",function(){e.reload("stock_table",{page:{curr:1},where:{t:(new Date).getTime(),productName:b("#productName_search").val(),cellphoneNo:b("#productId_search").val()},loading:!0})}),t.render({elem:'input[name="stock_search_date"]',range:"到",format:"yyyy-MM-dd"}),b("#add").on("click",function(){var e=i.open({content:"/stock/stock_edit",type:2,anim:4,title:"编辑库存",btn:["保存","取消"],success:function(e,t){},yes:function(e,t){var n=i.getChildFrame("#stock_form",e),l=a(n);if(""==l)b.parseJSON(n.contents().find("#fee_container").attr("data"));else i.msg(l)}});i.full(e)}),e.render({elem:"#table_content",id:"stock_table",where:{t:(new Date).getTime()},cols:[[{field:"productName",align:"center",title:"品名"},{field:"qNo",align:"center",title:"条形码"},{field:"batch",align:"center",title:"批次"},{field:"location",align:"center",title:"产地"},{field:"location",align:"center",title:"规格"},{field:"location",align:"center",title:"供应商"},{field:"state",align:"center",title:"库存状态",templet:function(e){return"F"==e.sex?"女":"男"}},{fixed:"right",align:"center",title:"操作",toolbar:"#table_control_bar"}]],page:!0,loading:!0,limits:[10,20,50,90]});var a=function(e){var t=new CommonValidationUtils,n=new CommonValidationEmu,l=e.contents().find("input[name='productName']").val(),i=e.contents().find("input[name='productBatch']").val(),a=e.contents().find("input[name='productDate']").val(),o=e.contents().find("input[name='deadDate']").val(),s=e.contents().find("input[name='qno']").val(),c=e.contents().find("input[name='location']").val(),r=e.contents().find("#box_num").val(),u=e.contents().find("select[name='positon']").val(),d=e.contents().find("#plus_num").val(),f=e.contents().find("select[name='plusPosition']").val(),m=e.contents().find("#format_num").val(),p=e.contents().find("#guaranteeTime").val(),g=e.contents().find("#singleNetWeight").val(),v=e.contents().find("#singleCapacity").val(),N=(e.contents().find("#state").val(),e.contents().find("#storage").val(),e.contents().find("#wastage").val()),y=(e.contents().find("#supplierId").val(),e.contents().find("#storage_fee").val());if(t.isNull(l)||t.isNull(i)||t.isNull(s)||t.isNull(c)||t.isNull(r)||t.isNull(u)||t.isNull(d)||t.isNull(f)||t.isNull(m)||t.isNull(p)||t.isNull(g)||t.isNull(v)||t.isNull(N)||t.isNull(a)||t.isNull(o)||t.isNull(y))return n.errorMsg.all_not_null;for(var _=b.parseJSON(e.contents().find("#fee_container").attr("data")),h=0;h<_.length;h++){if(t.isNull(_[h].fee))return"未设置["+_[h].type+"],若无需保存此项，请删除。";if(!t.isNumber(_[h].fee)&&!t.isDecimal(_[h].fee))return"["+_[h].type+"],要求输入数字。"}return""}});
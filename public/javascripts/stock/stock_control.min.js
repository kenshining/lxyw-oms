layui.use(["layer","jquery","form","table"],function(){var y=layui.jquery,t=(layui.form,layui.table),i=layui.layer;y("#search").on("click",function(){t.reload("stock_table",{page:{curr:1},where:{t:(new Date).getTime(),productName:y("#productName_search").val(),cellphoneNo:y("#productId_search").val()},loading:!0})}),y("#add").on("click",function(){var t=i.open({content:"/stock/stock_edit",type:2,anim:4,title:"编辑库存",btn:["保存","取消"],success:function(t,e){},yes:function(t,e){var n=i.getChildFrame("#stock_form",t),l=a(n);""==l?i.msg("正在提交"):i.msg(l)}});i.full(t)}),t.render({elem:"#table_content",id:"stock_table",where:{t:(new Date).getTime()},cols:[[{type:"checkbox"},{field:"productName",align:"center",title:"品名"},{field:"qNo",align:"center",title:"条形码"},{field:"batch",align:"center",title:"批次"},{field:"location",align:"center",title:"产地"},{field:"location",align:"center",title:"规格"},{field:"location",align:"center",title:"供应商"},{field:"state",align:"center",title:"库存状态",templet:function(t){return"F"==t.sex?"女":"男"}},{fixed:"right",align:"center",title:"操作",toolbar:"#table_control_bar"}]],page:!0,loading:!0,limits:[10,20,50,90]});var a=function(t){var e=new CommonValidationUtils,n=new CommonValidationEmu,l=t.contents().find("input[name='productName']").val(),i=t.contents().find("input[name='productBatch']").val(),a=t.contents().find("input[name='qno']").val(),o=t.contents().find("input[name='location']").val(),c=t.contents().find("#box_num").val(),s=t.contents().find("select[name='positon']").val(),r=t.contents().find("#plus_num").val(),u=t.contents().find("select[name='plusPosition']").val(),d=t.contents().find("#format_num").val(),f=t.contents().find("#guaranteeTime").val(),m=t.contents().find("#singleNetWeight").val(),g=t.contents().find("#singleCapacity").val(),p=(t.contents().find("#state").val(),t.contents().find("#storage").val(),t.contents().find("#wastage").val()),v=(t.contents().find("#supplierId").val(),t.contents().find("#storage_fee").val());if(e.isNull(l)||e.isNull(i)||e.isNull(a)||e.isNull(o)||e.isNull(c)||e.isNull(s)||e.isNull(r)||e.isNull(u)||e.isNull(d)||e.isNull(f)||e.isNull(m)||e.isNull(g)||e.isNull(p)||e.isNull(v))return n.errorMsg.all_not_null;for(var N=y.parseJSON(t.contents().find("#fee_container").attr("data")),_=0;_<N.length;_++)if(e.isNull(N[_].fee))return"未设置["+N[_].type+"],若无需保存此项，请删除。";return""}});
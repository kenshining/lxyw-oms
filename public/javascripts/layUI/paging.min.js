layui.define(["layer","laypage","laytpl"],function(e){"use strict";var m=layui.jquery,c=void 0===parent.layui.layer?layui.layer:parent.layui.layer,d=layui.laytpl,t=function(){this.config={url:void 0,type:"POST",elem:void 0,params:{},openWait:!1,tempElem:void 0,tempType:0,paged:!0,pageConfig:{elem:void 0,pageSize:15},success:void 0,fail:function(e){console.log(e.msg)},complate:void 0,serverError:function(e,t,r){f("错误提示： "+e.status+" "+e.statusText)}}};function f(e){throw new Error(e)}t.prototype.v="1.0.3",t.prototype.set=function(e){return m.extend(!0,this.config,e),this},t.prototype.init=function(e){var t=this;m.extend(!0,t.config,e);var r=t.config;(void 0===r.url&&f("Paging Error:请配置远程URL!"),void 0===r.elem&&f("Paging Error:请配置参数elem!"),0===m(r.elem).length&&f("Paging Error:找不到配置的容器elem!"),0===r.tempType&&(void 0===r.tempElem&&f("Paging Error:请配置参数tempElem!"),0===m(r.tempElem).length&&f("Paging Error:找不到配置的容器tempElem!")),r.paged)&&(void 0===r.pageConfig.elem&&f("Paging Error:请配置参数pageConfig.elem!"));return"GET"!==r.type.toUpperCase()&&"POST"!==r.type.toUpperCase()&&f("Paging Error:type参数配置出错，只支持GET或都POST"),t.get({pageIndex:1,pageSize:r.pageConfig.pageSize}),t},t.prototype.get=function(e){var g=this,s=g.config,u=void 0;s.openWait&&(u=c.load(2));var t={pageIndex:1,pageSize:s.pageConfig.pageSize};m.extend(!0,s.params,t,e),m.ajax({type:s.type,url:s.url,data:s.params,dataType:"json",success:function(t,e,r){if(void 0!==u&&c.close(u),t.rel){var a=0===s.tempType?m(s.tempElem).html():s.tempElem;if(d(a).render(t,function(e){s.renderBefore?s.renderBefore(e,function(e){m(s.elem).html(e)},t.list):m(s.elem).html(e)}),s.paged){if(null===t.count||void 0===t.count)return void f("Paging Error:请返回数据总数！");var n=s.pageConfig,i=n.pageSize,o=t.count%i==0?t.count/i:t.count/i+1,p={cont:m(n.elem),curr:s.params.pageIndex,pages:o,jump:function(e,t){var r=e.curr;t||g.get({pageIndex:r,pageSize:i})}};m.extend(p,n),layui.laypage(p)}s.success&&s.success()}else{var l=m(s.elem).siblings("thead").find("th").length;m(s.elem).html('<tr><td colspan="'+l+'" style="text-align:left;">'+t.msg+"</td></tr>"),s.fail&&s.fail(t)}s.complate&&s.complate()},error:function(e,t,r){void 0!==u&&c.close(u),s.serverError(e,t,r)}})};var r=new t;e("paging",function(e){return r.set(e)})});
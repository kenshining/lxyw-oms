!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.way=e()}(this,function(){"use strict";var i,p,f="way",t=function(){this._watchers={},this._watchersAll={}};(t.prototype.constructor=t).prototype.watchAll=function(t){this._watchersAll=this._watchersAll||[],l.contains(this._watchersAll,t)||this._watchersAll.push(t)},t.prototype.watch=function(t,e){this._watchers||(this._watchers={}),this._watchers[t]=this._watchers[t]||[],this._watchers[t].push(e)},t.prototype.findWatcherDeps=function(e){var r=[];return l.keys(this._watchers).forEach(function(t){s(e,t)&&r.push(t)}),r},t.prototype.emitChange=function(e){this._watchers||(this._watchers={});var r=this;r.findWatcherDeps(e).forEach(function(e){r._watchers[e]&&r._watchers[e].forEach(function(t){t.apply(r,[r.get(e)])})}),r._watchersAll&&l.isArray(r._watchersAll)&&r._watchersAll.forEach(function(t){l.isFunction(t)&&t.apply(r,[e,r.get(e)])})};var e=function(){this.data={},this._bindings={},this.options={persistent:!0,timeoutInput:50,timeoutDOM:500}};e.prototype=Object.create(t.prototype),(e.constructor=e).prototype.dom=function(t){return this._element=p.dom(t).get(0),this},e.prototype.toStorage=function(t,e){var r=this,n=(e=e||r._element,t=t||r.dom(e).getOptions(),r.dom(e).toJSON(t)),o=r.dom(e).scope(),i=o?o+"."+t.data:t.data;if(t.readonly)return!1;r.set(i,n,t)},e.prototype.toJSON=function(t,e){e=e||this._element;var r=this.dom(e).getValue();t=t||this.dom(e).getOptions();return l.isArray(t.pick)&&(r=c(r,t.pick,!0)),l.isArray(t.omit)&&(r=c(r,t.omit,!1)),r},e.prototype.fromStorage=function(t,e){var r=this;e=e||r._element;if((t=t||r.dom(e).getOptions()).writeonly)return!1;var n=r.dom(e).scope(),o=n?n+"."+t.data:t.data,i=r.get(o);r.dom(e).fromJSON(i,t)},e.prototype.fromJSON=function(t,e,r){var n=this;r=r||n._element;if((e=e||n.dom(r).getOptions()).writeonly)return!1;if(l.isObject(t)){l.isArray(e.pick)&&(t=c(t,e.pick,!0)),l.isArray(e.omit)&&(t=c(t,e.omit,!1));var o=l.isObject(n.dom(r).toJSON())?n.dom(r).toJSON():{};t=l.extend(o,t)}e.json&&(t=A.isStringified(t)?t:A.prettyprint(t)),n.dom(r).setValue(t,e)},e.prototype.getValue=function(e){e=e||this._element;return({SELECT:function(){return p.dom(e).val()},INPUT:function(){var t=p.dom(e).type();return l.contains(["text","password"],t)?p.dom(e).val():l.contains(["checkbox","radio"],t)?p.dom(e).prop("checked")?p.dom(e).val():null:void 0},TEXTAREA:function(){return p.dom(e).val()}}[p.dom(e).get(0).tagName]||function(t){return p.dom(e).html()})()},e.prototype._transforms={uppercase:function(t){return l.isString(t)?t.toUpperCase():t},lowercase:function(t){return l.isString(t)?t.toLowerCase():t},reverse:function(t){return t&&t.split&&l.isFunction(t.split)?t.split("").reverse().join(""):t}},e.prototype.registerTransform=function(t,e){l.isFunction(e)&&(this._transforms[t]=e)},e.prototype.setValue=function(r,n,o){var i=this;o=o||i._element;(n=n||i.dom(o).getOptions()).transform=n.transform||[],n.transform.forEach(function(t){var e=i._transforms[t]||function(t){return t};r=e(r)});({SELECT:function(t){p.dom(o).val(t)},INPUT:function(t){l.isString(t)||(t=JSON.stringify(t));var e=p.dom(o).get(0).type;l.contains(["text","password"],e)&&p.dom(o).val(t||""),l.contains(["checkbox","radio"],e)&&(t===p.dom(o).val()?p.dom(o).prop("checked",!0):p.dom(o).prop("checked",!1))},TEXTAREA:function(t){l.isString(t)||(t=JSON.stringify(t)),p.dom(o).val(t||"")},PRE:function(t){n.html?p.dom(o).html(t):p.dom(o).text(t)},IMG:function(e){if(!e)return e=n.default||"",p.dom(o).attr("src",e),!1;var t,r;t=e,r=function(t){p.dom(o).removeClass("way-loading"),t?p.dom(o).removeClass("way-error").addClass("way-success"):(e?p.dom(o).addClass("way-error"):p.dom(o).removeClass("way-error").removeClass("way-success"),e=n.default||""),p.dom(o).attr("src",e)},p.dom(o).addClass("way-loading"),p.dom("img",{src:t,onerror:function(){r(!1)},onload:function(){r(!0)}})}}[p.dom(o).get(0).tagName]||function(t){n.html?p.dom(o).html(t):p.dom(o).text(t)})(r)},e.prototype.setDefault=function(t,e,r){var n=this;r=r||n._element,t=t||!1;if(!(e=e?l.extend(n.dom(r).getOptions(),e):n.dom(r).getOptions()).default)return!1;t?n.set(e.data,e.default,e):n.dom(r).setValue(e.default,e)},e.prototype.setDefaults=function(){var t=p.dom("[way-default]").get();for(var e in t){var r=t[e],n=this.dom(r).getOptions().data||null;(n?this.get(n):null)||this.dom(r).setDefault()}},e.prototype.registerBindings=function(){var t=this,e="[way-data]";t._bindings={};var r=p.dom(e).get();for(var n in r){var o=r[n],i=t.dom(o).getOptions(),a=t.dom(o).scope();e=a?a+"."+i.data:i.data;t._bindings[e]=t._bindings[e]||[],l.contains(t._bindings[e],p.dom(o).get(0))||t._bindings[e].push(p.dom(o).get(0))}},e.prototype.updateBindings=function(t){var e=this;e._bindings=e._bindings||{},r(e._bindings,t).forEach(function(t){p.dom(t).get(0)===p.dom(":focus").get(0)||e.dom(t).fromStorage()}),e._bindings.__all__&&e._bindings.__all__.forEach(function(t){e.dom(t).fromJSON(e.data)})},e.prototype.registerRepeats=function(){var t=this;t._repeats=t._repeats||{},t._repeatsCount=t._repeatsCount||0;var e=p.dom("[way-repeat]").get();for(var r in e){var n=e[r],o=t.dom(n).getOptions();t._repeats[o.repeat]=t._repeats[o.repeat]||[];var i=f+'-repeat-wrapper="'+t._repeatsCount+'"';if(!p.dom(n).parent("["+i+"]").length){t._repeats[o.repeat].push({id:t._repeatsCount,element:p.dom(n).clone(!0).removeAttr(f+"-repeat").removeAttr(f+"-filter").get(0),selector:o.repeat,filter:o.filter});var a=document.createElement("div");p.dom(a).attr(f+"-repeat-wrapper",t._repeatsCount),p.dom(a).attr(f+"-scope",o.repeat),o.filter&&p.dom(a).attr(f+"-filter",o.filter),p.dom(n).replaceWith(a),t.updateRepeats(o.repeat),t._repeatsCount++}}},e.prototype.updateRepeats=function(t){var a=this;a._repeats=a._repeats||{},r(a._repeats,t).forEach(function(t){var e='[way-repeat-wrapper="'+t.id+'"]',r=a.get(t.selector),n=[];for(var o in t.filter=t.filter||[],p.dom(e).empty(),r){p.dom(t.element).attr(f+"-scope",o);var i=p.dom(t.element).get(0).outerHTML;i=i.replace(/\$\$key/gi,o),n.push(i)}p.dom(e).html(n.join("")),a.registerBindings(),a.updateBindings()})},e.prototype.updateForms=function(){var t="form[way-data]",e=p.dom(t).get();for(var r in e){var n=e[r],o=this.dom(n).getOptions(),i=o.data;p.dom(n).removeAttr(f+"-data");var a=p.dom(n).find("[name]").reverse().get();for(var r in a){var s=a[r],u=p.dom(s).attr("name");if(d(u,"[]")){var c=u.split("[]")[0],l="[name^='"+c+"']";u=c+"."+p.dom(n).find(l).get().length}t=i+"."+u;o.data=t,this.dom(s).setOptions(o),p.dom(s).removeAttr("name")}}},e.prototype.registerDependencies=function(){this.registerBindings(),this.registerRepeats()},e.prototype.updateDependencies=function(t){this.updateBindings(t),this.updateRepeats(t),this.updateForms(t)},e.prototype.setOptions=function(t,e){e=this._element||e;for(var r in t){var n=f+"-"+r,o=t[r];p.dom(e).attr(n,o)}},e.prototype.getOptions=function(t){t=t||this._element;return l.extend({data:null,html:!1,readonly:!1,writeonly:!1,persistent:!1},this.dom(t).getAttrs(f))},e.prototype.getAttrs=function(i,t){t=t||this._element;var a={};return[].slice.call(p.dom(t).get(0).attributes).forEach(function(t){var e,r;if(!(!i||!s(t.name,i+"-"))){var n=i?t.name.slice(i.length+1,t.name.length):t.name,o=(e=n,r=t.value,({array:function(t){return t.split(",")},boolean:function(t){return"true"===t||"false"!==t}}[{pick:"array",omit:"array",readonly:"boolean",writeonly:"boolean",json:"boolean",html:"boolean",persistent:"boolean"}[e]||null]||function(){return r})(r));l.contains(["transform","filter"],n)&&(o=o.split("|")),a[n]=o}}),a},e.prototype.scope=function(t,e){e=e||this._element;var r=f+"-scope",n=f+"-scope-break",o=[],i=p.dom(e).parents("[way-scope-break], [way-scope]").get();for(var a in i){var s=i[a];if(p.dom(s).attr(n))break;var u=p.dom(s).attr(r);o.unshift(u)}return p.dom(e).attr(r)&&o.push(p.dom(e).attr(r)),p.dom(e).attr(n)&&(o=[]),l.compact(o).join(".")},e.prototype.get=function(t){return!(void 0!==t&&!l.isString(t))&&(this.data?t?A.get(this.data,t):this.data:{})},e.prototype.set=function(t,e,r){if(!t)return!1;if("this"===t.split(".")[0])return console.log('Sorry, "this" is a reserved word in way.js'),!1;var n=this;if(r=r||{},t){if(!l.isString(t))return!1;n.data=n.data||{},n.data=t?A.set(n.data,t,e):{},n.updateDependencies(t),n.emitChange(t,e),r.persistent&&n.backup(t)}},e.prototype.push=function(t,e,r){if(!t)return!1;var n=this;r=r||{},t&&(n.data=t?A.push(n.data,t,e,!0):{}),n.updateDependencies(t),n.emitChange(t,null),r.persistent&&n.backup(t)},e.prototype.remove=function(t,e){var r=this;e=e||{},r.data=t?A.remove(r.data,t):{},r.updateDependencies(t),r.emitChange(t,null),e.persistent&&r.backup(t)},e.prototype.clear=function(){this.remove(null,{persistent:!0})},e.prototype.backup=function(){if(this.options.persistent)try{var t=this.data||{};localStorage.setItem(f,JSON.stringify(t))}catch(t){console.log("Your browser does not support localStorage.")}},e.prototype.restore=function(){if(this.options.persistent)try{var t=localStorage.getItem(f);try{for(var e in t=JSON.parse(t))this.set(e,t[e])}catch(t){}}catch(t){console.log("Your browser does not support localStorage.")}};var a=function(t,e){var r=["matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],n=null;for(var o in r)if(n=r[o],l.isFunction(t[n]))return t[n](e);return!1},s=function(t,e){return""===e||null!==t&&null!==e&&(t=String(t),e=String(e),t.length>=e.length&&t.slice(0,e.length)===e)},d=function(t,e){return""===e||null!==t&&null!==e&&(t=String(t),e=String(e),t.length>=e.length&&t.slice(t.length-e.length,t.length)===e)},u=function(e,r,n){return l.keys(e).forEach(function(t){n?s(t,r)||delete e[t]:s(t,r)&&delete e[t]}),e},c=function(t,e,r){var n=A.flatten(t);for(var o in e)n=u(n,e[o],r);var i,a=A.unflatten(n);return i=a,l.pick(i,l.compact(l.keys(i)))},r=function(t,e){var r=[];if(e){var n=e.split("."),o=n[n.length-1];if(!isNaN(o))n.pop(),r=t[i=n.join(".")]?l.union(r,t[i]):r;for(var i in t)s(i,e)&&(r=l.union(r,t[i]))}else for(var i in t)r=l.union(r,t[i]);return r},l={},n=Array.prototype,o=Object.prototype,h=Function.prototype,m=(Array.isArray,Object.keys),g=(h.bind,n.push),v=n.slice,y=n.concat,_=o.toString,w=o.hasOwnProperty,b=function(t,e,r,n){if(e&&l.every(t,l.isArray))return y.apply(n,t);for(var o=0,i=t.length;o<i;o++){var a=t[o];l.isArray(a)||l.isArguments(a)?e?g.apply(n,a):b(a,e,r,n):r||n.push(a)}return n},S=function(o,i,t){if(void 0===i)return o;switch(null==t?3:t){case 1:return function(t){return o.call(i,t)};case 2:return function(t,e){return o.call(i,t,e)};case 3:return function(t,e,r){return o.call(i,t,e,r)};case 4:return function(t,e,r,n){return o.call(i,t,e,r,n)}}return function(){return o.apply(i,arguments)}};l.compact=function(t){return l.filter(t,l.identity)},l.filter=function(t,n,e){var o=[];return null==t||(n=l.iteratee(n,e),l.each(t,function(t,e,r){n(t,e,r)&&o.push(t)})),o},l.identity=function(t){return t},l.every=function(t,e,r){if(null==t)return!0;e=l.iteratee(e,r);var n,o,i=t.length!==+t.length&&l.keys(t),a=(i||t).length;for(n=0;n<a;n++)if(!e(t[o=i?i[n]:n],o,t))return!1;return!0},l.union=function(){return l.uniq(b(arguments,!0,!0,[]))},l.uniq=function(t,e,r,n){if(null==t)return[];l.isBoolean(e)||(n=r,r=e,e=!1),null!=r&&(r=l.iteratee(r,n));for(var o=[],i=[],a=0,s=t.length;a<s;a++){var u=t[a];if(e)a&&i===u||o.push(u),i=u;else if(r){var c=r(u,a,t);l.indexOf(i,c)<0&&(i.push(c),o.push(u))}else l.indexOf(o,u)<0&&o.push(u)}return o},l.pick=function(t,e,r){var n,o={};if(null==t)return o;if(l.isFunction(e))for(n in e=S(e,r),t){var i=t[n];e(i,n,t)&&(o[n]=i)}else{var a=y.apply([],v.call(arguments,1));t=new Object(t);for(var s=0,u=a.length;s<u;s++)(n=a[s])in t&&(o[n]=t[n])}return o},l.has=function(t,e){return null!=t&&w.call(t,e)},l.keys=function(t){if(!l.isObject(t))return[];if(m)return m(t);var e=[];for(var r in t)l.has(t,r)&&e.push(r);return e},l.contains=function(t,e){return null!=t&&(t.length!==+t.length&&(t=l.values(t)),0<=l.indexOf(t,e))},l.sortedIndex=function(t,e,r,n){for(var o=(r=l.iteratee(r,n,1))(e),i=0,a=t.length;i<a;){var s=i+a>>>1;r(t[s])<o?i=s+1:a=s}return i},l.property=function(e){return function(t){return t[e]}},l.iteratee=function(t,e,r){return null==t?l.identity:l.isFunction(t)?S(t,e,r):l.isObject(t)?l.matches(t):l.property(t)},l.pairs=function(t){for(var e=l.keys(t),r=e.length,n=Array(r),o=0;o<r;o++)n[o]=[e[o],t[e[o]]];return n},l.matches=function(t){var o=l.pairs(t),i=o.length;return function(t){if(null==t)return!i;t=new Object(t);for(var e=0;e<i;e++){var r=o[e],n=r[0];if(r[1]!==t[n]||!(n in t))return!1}return!0}},l.indexOf=function(t,e,r){if(null==t)return-1;var n=0,o=t.length;if(r){if("number"!=typeof r)return t[n=l.sortedIndex(t,e)]===e?n:-1;n=r<0?Math.max(0,o+r):r}for(;n<o;n++)if(t[n]===e)return n;return-1},l.values=function(t){for(var e=l.keys(t),r=e.length,n=Array(r),o=0;o<r;o++)n[o]=t[e[o]];return n},l.extend=function(t){if(!l.isObject(t))return t;for(var e,r,n=1,o=arguments.length;n<o;n++)for(r in e=arguments[n])w.call(e,r)&&(t[r]=e[r]);return t},l.isArray=function(t){return"[object Array]"===_.call(t)},l.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===_.call(t)},l.isUndefined=function(t){return void 0===t},l.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},l.each=function(t,e,r){if(null==t)return t;e=S(e,r);var n,o=t.length;if(o===+o)for(n=0;n<o;n++)e(t[n],n,t);else{var i=l.keys(t);for(n=0,o=i.length;n<o;n++)e(t[i[n]],i[n],t)}return t},l.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){l["is"+e]=function(t){return _.call(t)==="[object "+e+"]"}});var O=function(t,e,r,n){var o,i=e.replace(/\[(["']?)([^\1]+?)\1?\]/g,".$2").replace(/^\./,"").split("."),a=0,s=i.length;if(2<arguments.length){for(o=t,s--;a<s;)t=t[e=i[a++]]=l.isObject(t[e])?t[e]:{};n?l.isArray(t)?t.splice(i[a],1):delete t[i[a]]:t[i[a]]=r,r=o}else{for(;null!=(t=t[i[a++]])&&a<s;);r=a<s?void 0:t}return r},A={VERSION:"0.1.0",debug:!0,exit:function(t,e,r,n){if(A.debug){var o={noJSON:"Not a JSON",noString:"Not a String",noArray:"Not an Array",missing:"Missing argument"},i={source:t,data:r,value:n};i.message=o[e]?o[e]:"No particular reason",console.log("Error",i)}},is:function(t){return"[object Object]"==_.call(t)},isStringified:function(t){var e=!1;try{e=/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}catch(t){}return e},get:function(t,e){return null==t?A.exit("get","missing","json",t):null==e?A.exit("get","missing","selector",e):l.isString(e)?O(t,e):A.exit("get","noString","selector",e)},set:function(t,e,r){return null==t?A.exit("set","missing","json",t):null==e?A.exit("set","missing","selector",e):l.isString(e)?r?O(t,e,r):A.remove(t,e):A.exit("set","noString","selector",e)},remove:function(t,e){return null==t?A.exit("remove","missing","json",t):null==e?A.exit("remove","missing","selector",e):l.isString(e)?O(t,e,null,!0):A.exit("remove","noString","selector",e)},push:function(t,e,r,n){if(null==t)return A.exit("push","missing","json",t);if(null==e)return A.exit("push","missing","selector",e);var o=A.get(t,e);if(!l.isArray(o)){if(!n)return A.exit("push","noArray","array",o);o=[]}return o.push(r),A.set(t,e,o)},unshift:function(t,e,r){if(null==t)return A.exit("unshift","missing","json",t);if(null==e)return A.exit("unshift","missing","selector",e);if(null==r)return A.exit("unshift","missing","value",r);var n=A.get(t,e);return l.isArray(n)?(n.unshift(r),A.set(t,e,n)):A.exit("unshift","noArray","array",n)},flatten:function(t){if("Object"!=t.constructor.name)return A.exit("flatten","noJSON","json",t);var s={};return function t(e,r){if(Object(e)!==e)s[r]=e;else if(Array.isArray(e))for(var n=0,o=e.length;n<o;n++)t(e[n],r?r+"."+n:""+n),0==o&&(s[r]=[]);else{var i=!0;for(var a in e)i=!1,t(e[a],r?r+"."+a:a);i&&(s[r]={})}}(t,""),s},unflatten:function(t){if(Object(t)!==t||Array.isArray(t))return t;var e,r,n,o,i,a={};for(var s in t){for(e=a,r="",o=0;n=s.indexOf(".",o),i=s.substring(o,-1!==n?n:void 0),e=e[r]||(e[r]=isNaN(parseInt(i))?{}:[]),r=i,o=n+1,0<=n;);e[r]=t[s]}return a[""]},prettyprint:function(t){return JSON.stringify(t,void 0,2)}},x=function(){};(x.constructor=x).prototype.dom=function(t,e){var r=[];if(!e)return l.isString(t)?r=[].slice.call(document.querySelectorAll(t)):l.isObject(t)&&t.attributes&&(r=[t]),this._elements=r,this.length=r.length,this;var n=document.createElement(t);for(var o in e)n[o]=e[o]},x.prototype.on=function(t,e){var r=this._elements;t=t.split(" ");for(var n=0,o=r.length;n<o;n++)for(var i=r[n],a=0,s=t.length;a<s;a++)i.addEventListener&&i.addEventListener(t[a],e,!1)},x.prototype.find=function(t){var e=this.get(0),r=[];return l.isString(t)&&(r=[].slice.call(e.querySelectorAll(t))),this._elements=r,this},x.prototype.get=function(t,e){var r=this._elements||[],n=r[t]||{};return e?(this._element=n,this):l.isNumber(t)?n:r},x.prototype.reverse=function(){return this._elements=this._elements.reverse(),this},x.prototype.val=function(t){return this.prop("value",t)},x.prototype.type=function(t){return this.prop("type",t)},x.prototype.html=function(t){return this.prop("innerHTML",t)},x.prototype.text=function(t){return this.prop("innerHTML",(e=t)&&l.isString(e)?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e);var e},x.prototype.prop=function(t,e){var r=this._elements;for(var n in r){if(l.isUndefined(e))return r[n][t];r[n][t]=e}},x.prototype.attr=function(t,e){var r=this._elements;for(var n in r){if(void 0===e)return r[n].getAttribute(t);r[n].setAttribute(t,e)}return this},x.prototype.removeAttr=function(t){for(var e in this._elements)this._elements[e].removeAttribute(t);return this},x.prototype.addClass=function(t){for(var e in this._elements)this._elements[e].classList.add(t);return this},x.prototype.removeClass=function(t){for(var e in this._elements)this._elements[e].classList.remove(t);return this},x.prototype.parents=function(t){for(var e=this.get(0).parentNode,r=[];null!==e;){var n=e,o=a(n,t),i=void 0===n.doctype;t||(o=!0),o&&i&&r.push(n),e=n.parentNode}return this._elements=r,this},x.prototype.parent=function(t){var e=this.get(0).parentNode,r=a(e,t);return t||(r=!0),r?e:{}},x.prototype.clone=function(t){var e=this.get(0).cloneNode(!0);return this._elements=[e],t?this:e},x.prototype.empty=function(t){var e=this.get(0);if(!e||!e.hasChildNodes)return t?this:e;for(;e.hasChildNodes();)e.removeChild(e.lastChild);return t?this:e},x.prototype.replaceWith=function(t){var e=this.get(0);e.parentNode.replaceChild(t,e)},x.prototype.ready=function(t){document&&l.isFunction(document.addEventListener)?document.addEventListener("DOMContentLoaded",t,!1):window&&l.isFunction(window.addEventListener)?window.addEventListener("load",t,!1):document.onreadystatechange=function(){"complete"===document.readyState&&t()}},i=new e;var N=null,j=function(e){N&&clearTimeout(N),N=setTimeout(function(){var t=p.dom(e.target).get(0);i.dom(t).toStorage()},i.options.timeout)},k=function(t){t.preventDefault();var e=i.dom(this).getOptions();i.remove(e.data,e)},E=function(t){t.preventDefault();var e=i.dom(this).getOptions();if(!e||!e["action-push"])return!1;var r=e["action-push"].split(":"),n=r[0]||null,o=r[1]||null;i.push(n,o,e)},C=function(t){t.preventDefault();var e=i.dom(this).getOptions();if(!e||!e["action-remove"])return!1;i.remove(e["action-remove"],e)},D=null,T=function(){D&&clearTimeout(D),D=setTimeout(function(){i.registerDependencies(),J()},i.options.timeoutDOM)};p=new x,i.w=p;var J=function(){p.dom("body").on("DOMSubtreeModified",T),p.dom("[way-data]").on("input change",j),p.dom("[way-clear]").on("click",k),p.dom("[way-action-remove]").on("click",C),p.dom("[way-action-push]").on("click",E)};return p.ready(function(){J(),i.restore(),i.setDefaults(),i.registerDependencies(),i.updateDependencies()}),i});